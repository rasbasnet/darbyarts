"use strict";(self.webpackChunkdarbymitchell=self.webpackChunkdarbymitchell||[]).push([[127],{127:(e,r,t)=>{t.d(r,{beginStripeCheckout:()=>S});var n,o="https://js.stripe.com/v3",i=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,a="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",s=function(e){var r=e&&!e.advancedFraudSignals?"?advancedFraudSignals=false":"",t=document.createElement("script");t.src="".concat(o).concat(r);var n=document.head||document.body;if(!n)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return n.appendChild(t),t},c=null,l=null,u=null,d=function(e){return null!==c?c:(c=new Promise(function(r,t){if("undefined"!==typeof window&&"undefined"!==typeof document)if(window.Stripe&&e&&console.warn(a),window.Stripe)r(window.Stripe);else try{var n=function(){for(var e=document.querySelectorAll('script[src^="'.concat(o,'"]')),r=0;r<e.length;r++){var t=e[r];if(i.test(t.src))return t}return null}();if(n&&e)console.warn(a);else if(n){if(n&&null!==u&&null!==l){var c;n.removeEventListener("load",u),n.removeEventListener("error",l),null===(c=n.parentNode)||void 0===c||c.removeChild(n),n=s(e)}}else n=s(e);u=function(e,r){return function(){window.Stripe?e(window.Stripe):r(new Error("Stripe.js not available"))}}(r,t),l=function(e){return function(){e(new Error("Failed to load Stripe.js"))}}(t),n.addEventListener("load",u),n.addEventListener("error",l)}catch(d){return void t(d)}else r(null)})).catch(function(e){return c=null,Promise.reject(e)})},p=!1,f=function(){return n||(n=d(null).catch(function(e){return n=null,Promise.reject(e)}))};Promise.resolve().then(function(){return f()}).catch(function(e){p||console.warn(e)});var w;const h="pk_test_51SAfoU2UXgGRPFxwVjbKOKznWDE95ofjuFtWQ1MmDTbgoMTh47cznSPRuj9wAaRKjL35CZfE7blKRctXWmS8rO3600bXqqrpla",v=(null!==(w="http://localhost:4242")?w:"").replace(/\/$/,"");let m=null;const y=()=>(m||(m=function(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];p=!0;var n=Date.now();return f().then(function(e){return function(e,r,t){if(null===e)return null;var n=e.apply(void 0,r);return function(e,r){e&&e._registerWrapper&&e._registerWrapper({name:"stripe-js",version:"3.4.1",startTime:r})}(n,t),n}(e,r,n)})}(h)),m),S=async e=>{var r;let{items:t}=e;if(!Array.isArray(t)||0===t.length)throw new Error("No items provided for checkout.");const n=await y();if(!n)throw new Error("Unable to initialise Stripe.");const o=v?"".concat(v,"/api/stripe/create-checkout-session"):"/api/stripe/create-checkout-session",i=await fetch(o,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({items:t})});if(!(null!==(r=i.headers.get("content-type"))&&void 0!==r?r:"").includes("application/json"))throw new Error("Payment service returned an unexpected response. Please try again later.");const a=await i.json();var s;if(!i.ok||!a.sessionId)throw new Error(null!==(s=a.error)&&void 0!==s?s:"Unable to create Stripe checkout session.");const c=await n.redirectToCheckout({sessionId:a.sessionId});if(c.error)throw new Error(c.error.message)}}}]);
//# sourceMappingURL=127.c5cf5250.chunk.js.map